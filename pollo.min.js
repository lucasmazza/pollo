//= require 'jquery'
(function(){function e(e,t){this.endpoint=e,this.timeout=t,this.emitter=$({})}e.prototype.start=function(){this.execute()},e.prototype.stop=function(){clearTimeout(this.timer)},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.execute=function(){this.before(),$.ajax(this.endpoint).then($.proxy(this,"success")).always($.proxy(this,"done"))},e.prototype.before=function(){this.emitter.trigger("before",arguments)},e.prototype.done=function(){this.enqueue(),this.emitter.trigger("done",arguments)},e.prototype.success=function(){this.emitter.trigger("success",arguments)},e.prototype.enqueue=function(){this.timer=setTimeout($.proxy(this,"execute"),this.timeout)},"undefined"==typeof module?window.Pollo=e:module.exports=e})();